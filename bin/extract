#!/usr/bin/env bash
#
# Extracts archived files and mounts disk images.
#
# USAGE:
#
#   $ extract <file>
#

if [[ -z "$1" || "$1" == "-h" || "$1" == "--help" ]]; then cat <<HELP
Dotfiles - Lars Graubner - https://larsgraubner.com

Extracts archived files and mounts disk images.

Note: .dmg/hdiutil is Mac OS X-specific.

Usage: $(basename "$0") <file>

See the README for documentation.
https://github.com/lgraubner/dotfiles

Copyright (c) 2017 Lars Graubner
Licensed under the MIT license.
HELP
exit; else
    if [[ -f $1 ]]; then
        case $1 in
            *.tar.bz2)  tar -jxvf $1                        ;;
            *.tar.gz)   tar -zxvf $1                        ;;
            *.bz2)      bunzip2 $1                          ;;
            *.dmg)      hdiutil mount $1                    ;;
            *.gz)       gunzip $1                           ;;
            *.tar)      tar -xvf $1                         ;;
            *.tbz2)     tar -jxvf $1                        ;;
            *.tgz)      tar -zxvf $1                        ;;
            *.zip)      unzip $1                            ;;
            *.ZIP)      unzip $1                            ;;
            *.pax)      cat $1 | pax -r                     ;;
            *.pax.Z)    uncompress $1 --stdout | pax -r     ;;
            *.Z)        uncompress $1                       ;;
            *)          echo "'$1' cannot be extracted/mounted via extract()" exit 1
        esac
        exit 0
    else
        echo "'$1' is not a valid file"
        exit 1
    fi
fi
