#!/usr/bin/python
#
# Manages the dotfiles.
#
# USAGE:
#
#   $ dotfiles {install|update|upgrade}
#
import sys
# @TODO
from .. import logger
from subprocess import Popen

from .. import atom

def install():
    atom.install()

def update():
    atom.update()

def upgrade():
    logger.info('Fetching latest version...')
    process = subprocess.call('cd $HOME && git reset --hard HEAD && git pull', shell=True)
    if process.returncode == 0:
        logger.success('dotfiles updated!')
        subprocess.call('exec /bin/zsh -l', shell=True)
        exit(0)
    else:
        logger.error('Could not fetch latest dotfiles version.')
        exit(1)

if __name__ == '__main__':
    sys.stdout.write(sys.argv)
